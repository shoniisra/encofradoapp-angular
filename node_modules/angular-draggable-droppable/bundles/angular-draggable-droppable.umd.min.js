!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("rxjs"),require("@angular/core"),require("rxjs/operators"),require("@angular/common")):"function"==typeof define&&define.amd?define(["rxjs","@angular/core","rxjs/operators","@angular/common"],t):(e=e||self)["angular-draggable-droppable"]=t(e.rxjs,e.ng.core,e.rxjs.operators,e.ng.common)}(this,function(e,t,n,r){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e,t=t&&t.hasOwnProperty("default")?t.default:t,n=n&&n.hasOwnProperty("default")?n.default:n,r=r&&r.hasOwnProperty("default")?r.default:r;var o="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var i,a,l=(function(i,a){i.exports=function(e,t,n,r){function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function a(e,t){return e(t={exports:{}},t.exports),t.exports}e=e&&e.hasOwnProperty("default")?e.default:e,t=t&&t.hasOwnProperty("default")?t.default:t,n=n&&n.hasOwnProperty("default")?n.default:n,r=r&&r.hasOwnProperty("default")?r.default:r,"undefined"!=typeof window?window:void 0!==o||"undefined"!=typeof self&&self;var l=a(function(e,t){function n(e,t){return void 0===e?void 0===t?e:t:e}Object.defineProperty(t,"__esModule",{value:!0}),t.boolean=function(e,t){return"function"==typeof(e=n(e,t))?function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return!!e.apply(this,n)}:e?function(){return!0}:function(){return!1}},t.integer=function(e,t){return"function"==typeof(e=n(e,t))?function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=parseInt(e.apply(this,n),10);return o!=o?0:o}:(e=parseInt(e,10))!=e?function(){return 0}:function(){return e}},t.string=function(e,t){return"function"==typeof(e=n(e,t))?function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return""+e.apply(this,n)}:(e=""+e,function(){return e})}});i(l),l.integer,l.string;var s=a(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=["webkit","moz","ms","o"],r=void 0!==r?r:{},r=void 0!==r?r:{};t.requestAnimationFrame=function(){for(var e=0,t=n.length;e<t&&!r.requestAnimationFrame;++e)r.requestAnimationFrame=r[n[e]+"RequestAnimationFrame"];var o;return r.requestAnimationFrame||(o=0,r.requestAnimationFrame=function(e){var t=(new Date).getTime(),n=Math.max(0,16-t-o),r=setTimeout(function(){return e(t+n)},n);return o=t+n,r}),r.requestAnimationFrame.bind(r)}(),t.cancelAnimationFrame=function(){for(var e=0,t=n.length;e<t&&!r.cancelAnimationFrame;++e)r.cancelAnimationFrame=r[n[e]+"CancelAnimationFrame"]||r[n[e]+"CancelRequestAnimationFrame"];return r.cancelAnimationFrame||(r.cancelAnimationFrame=function(e){clearTimeout(e)}),r.cancelAnimationFrame.bind(r)}()});i(s),s.requestAnimationFrame,s.cancelAnimationFrame;var c,u,p,f,d=(c=function(e){return"function"==typeof e},u=Math.pow(2,53)-1,p=function(e){var t=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t}(e);return Math.min(Math.max(t,0),u)},f=function(e){var t=e.next(),n=Boolean(t.done);return!n&&t},function(e){var t,n,r,o=this,i=arguments.length>1?arguments[1]:void 0;if(void 0!==i){if(!c(i))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(t=arguments[2])}var a=function(e,t){if(null!=e&&null!=t){var n=e[t];if(null==n)return;if(!c(n))throw new TypeError(n+" is not a function");return n}}(e,function(e){if(null!=e){if(["string","number","boolean","symbol"].indexOf(typeof e)>-1)return Symbol.iterator;if("undefined"!=typeof Symbol&&"iterator"in Symbol&&Symbol.iterator in e)return Symbol.iterator;if("@@iterator"in e)return"@@iterator"}}(e));if(void 0!==a){n=c(o)?Object(new o):[];var l,s,u=a.call(e);if(null==u)throw new TypeError("Array.from requires an array-like or iterable object");for(r=0;;){if(!(l=f(u)))return n.length=r,n;s=l.value,n[r]=i?i.call(t,s,r):s,r++}}else{var d=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var m,v=p(d.length);for(n=c(o)?Object(new o(v)):new Array(v),r=0;r<v;)m=d[r],n[r]=i?i.call(t,m,r):m,r++;n.length=v}return n}),m="function"==typeof Array.from?Array.from:d,v=Array.isArray,h=Object.prototype.toString,g=v||function(e){return!!e&&"[object Array]"==h.call(e)},y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function b(e){return null!=e&&"object"===(void 0===e?"undefined":y(e))&&1===e.nodeType&&"object"===y(e.style)&&"object"===y(e.ownerDocument)}var w=a(function(e,t){function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0});var r=n(m),o=n(g),i=n(b),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},l=function(e){return null!=e&&"object"===(void 0===e?"undefined":a(e))&&1===e.nodeType&&"object"===a(e.style)&&"object"===a(e.ownerDocument)};function s(e){if("string"==typeof e)try{return document.querySelector(e)}catch(e){throw e}else if(i(e))return e}function c(e,t){if(t=f(t,!0),!l(t))return-1;for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}function u(e,t){return-1!==c(e,t)}function p(e){if(!e)return[];try{return"string"==typeof e?r(document.querySelectorAll(e)):o(e)?e.map(f):void 0===e.length?[f(e)]:r(e,f)}catch(e){throw new Error(e)}}function f(e,t){if("string"==typeof e)try{return document.querySelector(e)}catch(e){throw e}if(!l(e)&&!t)throw new TypeError(e+" is not a DOM element.");return e}t.indexOfElement=c,t.hasElement=u,t.domListOf=p,t.concatElementLists=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return e.reduce(function(e,t){return t.length?e:e.concat(p(t))},[])},t.addElements=function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return t=t.map(f),function(e,t){for(var n=0;n<t.length;n++)u(e,t[n])||e.push(t[n]);return t}(e,t)},t.removeElements=function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return t.map(f).reduce(function(t,n){var r=c(e,n);return-1!==r?t.concat(e.splice(r,1)):t},[])},t.resolveElement=f,t.select=s,t.selectAll=function(e){return"string"==typeof e?Array.prototype.slice.apply(document.querySelectorAll(e)):o(e)?e.map(s):"length"in e?r(e).map(s):void 0}});i(w),w.indexOfElement,w.hasElement,w.domListOf,w.concatElementLists,w.addElements,w.removeElements,w.resolveElement,w.select,w.selectAll;var E=function(e,t){t=t||{};var n=l.boolean(t.allowUpdate,!0);return function(t){if(t=t||window.event,e.target=t.target||t.srcElement||t.originalTarget,e.element=this,e.type=t.type,n(t)){if(t.targetTouches)e.x=t.targetTouches[0].clientX,e.y=t.targetTouches[0].clientY,e.pageX=t.targetTouches[0].pageX,e.pageY=t.targetTouches[0].pageY,e.screenX=t.targetTouches[0].screenX,e.screenY=t.targetTouches[0].screenY;else{if(null===t.pageX&&null!==t.clientX){var r=t.target&&t.target.ownerDocument||document,o=r.documentElement,i=r.body;e.pageX=t.clientX+(o&&o.scrollLeft||i&&i.scrollLeft||0)-(o&&o.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(o&&o.scrollTop||i&&i.scrollTop||0)-(o&&o.clientTop||i&&i.clientTop||0)}else e.pageX=t.pageX,e.pageY=t.pageY;e.x=t.clientX,e.y=t.clientY,e.screenX=t.screenX,e.screenY=t.screenY}e.clientX=e.x,e.clientY=e.y}}},S=a(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=E)&&"object"==typeof n&&"default"in n?n.default:n;function o(e){if(e===window)return function(){var e={top:{value:0,enumerable:!0},left:{value:0,enumerable:!0},right:{value:window.innerWidth,enumerable:!0},bottom:{value:window.innerHeight,enumerable:!0},width:{value:window.innerWidth,enumerable:!0},height:{value:window.innerHeight,enumerable:!0},x:{value:0,enumerable:!0},y:{value:0,enumerable:!0}};if(Object.create)return Object.create({},e);var t={};return Object.defineProperties(t,e),t}();try{var t=e.getBoundingClientRect();return void 0===t.x&&(t.x=t.left,t.y=t.top),t}catch(t){throw new TypeError("Can't call getBoundingClientRect on "+e)}}t.createPointCB=r,t.getClientRect=o,t.pointInside=function(e,t){var n=o(t);return e.y>n.top&&e.y<n.bottom&&e.x>n.left&&e.x<n.right}});i(S),S.createPointCB,S.getClientRect,S.pointInside;var x,C=void 0;"function"!=typeof Object.create?(x=function(){},C=function(e,t){if(e!==Object(e)&&null!==e)throw TypeError("Argument must be an object, or null");x.prototype=e||{};var n=new x;return x.prototype=null,void 0!==t&&Object.defineProperties(n,t),null===e&&(n.__proto__=null),n}):C=Object.create;var O=C,L=["altKey","button","buttons","clientX","clientY","ctrlKey","metaKey","movementX","movementY","offsetX","offsetY","pageX","pageY","region","relatedTarget","screenX","screenY","shiftKey","which","x","y"];function D(e,t){t=t||{};for(var n=O(e),r=0;r<L.length;r++)void 0!==t[L[r]]&&(n[L[r]]=t[L[r]]);return n}function A(e,t){console.log("data ",t),e.data=t||{},e.dispatched="mousemove"}var X,j=(X=function(e){var t={screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,button:0,buttons:1,relatedTarget:null,region:null};function n(e){for(var n=0;n<L.length;n++)t[L[n]]=e[L[n]]}return void 0!==e&&e.addEventListener("mousemove",n),{destroy:function(){e&&e.removeEventListener("mousemove",n,!1),t=null},dispatch:MouseEvent?function(e,n,r){var o=new MouseEvent("mousemove",D(t,n));return A(o,r),e.dispatchEvent(o)}:"function"==typeof document.createEvent?function(e,n,r){var o=D(t,n),i=document.createEvent("MouseEvents");return i.initMouseEvent("mousemove",!0,!0,window,0,o.screenX,o.screenY,o.clientX,o.clientY,o.ctrlKey,o.altKey,o.shiftKey,o.metaKey,o.button,o.relatedTarget),A(i,r),e.dispatchEvent(i)}:"function"==typeof document.createEventObject?function(e,n,r){var o=document.createEventObject(),i=D(t,n);for(var a in i)o[a]=i[a];return A(o,r),e.dispatchEvent(o)}:void 0}})&&"object"==typeof X&&"default"in X?X.default:X;function Y(e,t){void 0===t&&(t={});var n=this,r=4,o=!1;this.margin=t.margin||-1,this.scrollWhenOutside=t.scrollWhenOutside||!1;var i={},a=S.createPointCB(i),c=j(),u=!1;window.addEventListener("mousemove",a,!1),window.addEventListener("touchmove",a,!1),isNaN(t.maxSpeed)||(r=t.maxSpeed),this.autoScroll=l.boolean(t.autoScroll),this.syncMove=l.boolean(t.syncMove,!1),this.destroy=function(t){window.removeEventListener("mousemove",a,!1),window.removeEventListener("touchmove",a,!1),window.removeEventListener("mousedown",g,!1),window.removeEventListener("touchstart",g,!1),window.removeEventListener("mouseup",y,!1),window.removeEventListener("touchend",y,!1),window.removeEventListener("pointerup",y,!1),window.removeEventListener("mouseleave",E,!1),window.removeEventListener("mousemove",C,!1),window.removeEventListener("touchmove",C,!1),window.removeEventListener("scroll",h,!0),e=[],t&&b()},this.add=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return w.addElements.apply(void 0,[e].concat(t)),this},this.remove=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return w.removeElements.apply(void 0,[e].concat(t))};var p,f,d=null;"[object Array]"!==Object.prototype.toString.call(e)&&(e=[e]),f=e,e=[],f.forEach(function(e){e===window?d=window:n.add(e)}),Object.defineProperties(this,{down:{get:function(){return u}},maxSpeed:{get:function(){return r}},point:{get:function(){return i}},scrolling:{get:function(){return o}}});var m,v=null;function h(t){for(var n=0;n<e.length;n++)if(e[n]===t.target){o=!0;break}o&&s.requestAnimationFrame(function(){return o=!1})}function g(){u=!0}function y(){u=!1,b()}function b(){s.cancelAnimationFrame(m),s.cancelAnimationFrame(p)}function E(){u=!1}function x(){for(var t=null,n=0;n<e.length;n++)T(i,e[n])&&(t=e[n]);return t}function C(t){if(n.autoScroll()&&!t.dispatched){var r=t.target,o=document.body;v&&!T(i,v)&&(n.scrollWhenOutside||(v=null)),r&&r.parentNode===o?r=x():(r=function(t){if(!t)return null;if(v===t)return t;if(w.hasElement(e,t))return t;for(;t=t.parentNode;)if(w.hasElement(e,t))return t;return null}(r))||(r=x()),r&&r!==v&&(v=r),d&&(s.cancelAnimationFrame(p),p=s.requestAnimationFrame(O)),v&&(s.cancelAnimationFrame(m),m=s.requestAnimationFrame(L))}}function O(){D(d),s.cancelAnimationFrame(p),p=s.requestAnimationFrame(O)}function L(){v&&(D(v),s.cancelAnimationFrame(m),m=s.requestAnimationFrame(L))}function D(e){var t,r,o=S.getClientRect(e);t=i.x<o.left+n.margin?Math.floor(Math.max(-1,(i.x-o.left)/n.margin-1)*n.maxSpeed):i.x>o.right-n.margin?Math.ceil(Math.min(1,(i.x-o.right)/n.margin+1)*n.maxSpeed):0,r=i.y<o.top+n.margin?Math.floor(Math.max(-1,(i.y-o.top)/n.margin-1)*n.maxSpeed):i.y>o.bottom-n.margin?Math.ceil(Math.min(1,(i.y-o.bottom)/n.margin+1)*n.maxSpeed):0,n.syncMove()&&c.dispatch(e,{pageX:i.pageX+t,pageY:i.pageY+r,clientX:i.x+t,clientY:i.y+r}),setTimeout(function(){r&&function(e,t){e===window?window.scrollTo(e.pageXOffset,e.pageYOffset+t):e.scrollTop+=t}(e,r),t&&function(e,t){e===window?window.scrollTo(e.pageXOffset+t,e.pageYOffset):e.scrollLeft+=t}(e,t)})}window.addEventListener("mousedown",g,!1),window.addEventListener("touchstart",g,!1),window.addEventListener("mouseup",y,!1),window.addEventListener("touchend",y,!1),window.addEventListener("pointerup",y,!1),window.addEventListener("mousemove",C,!1),window.addEventListener("touchmove",C,!1),window.addEventListener("mouseleave",E,!1),window.addEventListener("scroll",h,!0)}function T(e,t,n){return n?e.y>n.top&&e.y<n.bottom&&e.x>n.left&&e.x<n.right:S.pointInside(e,t)}var M=function(e,t){return new Y(e,t)};return i(a(function(o,i){!function(e,t,n,r,o,i){i=i&&i.hasOwnProperty("default")?i.default:i;var a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function l(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}var s=function(){function e(){this.currentDrag=new t.Subject}return e.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],e.ngInjectableDef=n.defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),c=function(){function e(e,t,n){this.elementRef=e,this.renderer=t,this.zone=n,this.activeLongPressDrag=!1,this.longPressConfig={duration:300,delta:30},this.cancelledScroll=!1}return e.prototype.ngOnInit=function(){var e=this;this.zone.runOutsideAngular(function(){e.renderer.listen(e.elementRef.nativeElement,"touchmove",function(t){e.cancelledScroll&&t.cancelable&&t.preventDefault()})})},e.prototype.disableScroll=function(){this.cancelledScroll=!0,this.renderer.setStyle(this.elementRef.nativeElement,"overflow","hidden")},e.prototype.enableScroll=function(){this.cancelledScroll=!1,this.renderer.setStyle(this.elementRef.nativeElement,"overflow","auto")},e.prototype.hasScrollbar=function(){var e=this.elementRef.nativeElement.scrollWidth-this.elementRef.nativeElement.clientWidth>0,t=this.elementRef.nativeElement.scrollHeight-this.elementRef.nativeElement.clientHeight>0;return e||t},e.decorators=[{type:n.Directive,args:[{selector:"[mwlDraggableScrollContainer]"}]}],e.ctorParameters=function(){return[{type:n.ElementRef},{type:n.Renderer2},{type:n.NgZone}]},e.propDecorators={activeLongPressDrag:[{type:n.Input}],longPressConfig:[{type:n.Input}]},e}(),u=function(){function e(e,r,o,i,a,l,s){this.element=e,this.renderer=r,this.draggableHelper=o,this.zone=i,this.vcr=a,this.scrollContainer=l,this.document=s,this.dragAxis={x:!0,y:!0},this.dragSnapGrid={},this.ghostDragEnabled=!0,this.showOriginalElementWhileDragging=!1,this.dragCursor="",this.dragPointerDown=new n.EventEmitter,this.dragStart=new n.EventEmitter,this.ghostElementCreated=new n.EventEmitter,this.dragging=new n.EventEmitter,this.dragEnd=new n.EventEmitter,this.pointerDown$=new t.Subject,this.pointerMove$=new t.Subject,this.pointerUp$=new t.Subject,this.eventListenerSubscriptions={},this.destroy$=new t.Subject,this.timeLongPress={timerBegin:0,timerEnd:0}}return e.prototype.ngOnInit=function(){var e=this;this.checkEventListeners();var n=this.pointerDown$.pipe(r.filter(function(){return e.canDrag()}),r.mergeMap(function(n){n.event.stopPropagation&&!e.scrollContainer&&n.event.stopPropagation();var o=e.renderer.createElement("style");e.renderer.setAttribute(o,"type","text/css"),e.renderer.appendChild(o,e.renderer.createText("\n          body * {\n           -moz-user-select: none;\n           -ms-user-select: none;\n           -webkit-user-select: none;\n           user-select: none;\n          }\n        ")),e.document.head.appendChild(o);var s=e.getScrollPosition(),c=new t.Observable(function(t){var n=e.scrollContainer?e.scrollContainer.elementRef.nativeElement:"window";return e.renderer.listen(n,"scroll",function(e){return t.next(e)})}).pipe(r.startWith(s),r.map(function(){return e.getScrollPosition()})),u=new t.Subject,p=new t.ReplaySubject;e.zone.run(function(){e.dragPointerDown.next({x:0,y:0})});var f=t.merge(e.pointerUp$,e.pointerDown$,p,e.destroy$).pipe(r.share()),d=t.combineLatest(e.pointerMove$,c).pipe(r.map(function(e){var t=l(e,2),r=t[0],o=t[1];return{currentDrag$:u,transformX:r.clientX-n.clientX,transformY:r.clientY-n.clientY,clientX:r.clientX,clientY:r.clientY,scrollLeft:o.left,scrollTop:o.top}}),r.map(function(t){return e.dragSnapGrid.x&&(t.transformX=Math.round(t.transformX/e.dragSnapGrid.x)*e.dragSnapGrid.x),e.dragSnapGrid.y&&(t.transformY=Math.round(t.transformY/e.dragSnapGrid.y)*e.dragSnapGrid.y),t}),r.map(function(t){return e.dragAxis.x||(t.transformX=0),e.dragAxis.y||(t.transformY=0),t}),r.map(function(e){var t=e.scrollLeft-s.left,n=e.scrollTop-s.top;return a({},e,{x:e.transformX+t,y:e.transformY+n})}),r.filter(function(t){var n=t.x,r=t.y,o=t.transformX,i=t.transformY;return!e.validateDrag||e.validateDrag({x:n,y:r,transform:{x:o,y:i}})}),r.takeUntil(f),r.share()),m=d.pipe(r.take(1),r.share()),v=d.pipe(r.takeLast(1),r.share());return m.subscribe(function(t){var n=t.clientX,r=t.clientY,o=t.x,a=t.y;if(e.zone.run(function(){e.dragStart.next({cancelDrag$:p})}),e.scroller=i([e.scrollContainer?e.scrollContainer.elementRef.nativeElement:e.document.defaultView],{margin:20,autoScroll:function(){return!0}}),e.renderer.addClass(e.element.nativeElement,e.dragActiveClass),e.ghostDragEnabled){var l=e.element.nativeElement.getBoundingClientRect(),s=e.element.nativeElement.cloneNode(!0);if(e.showOriginalElementWhileDragging||e.renderer.setStyle(e.element.nativeElement,"visibility","hidden"),e.ghostElementAppendTo?e.ghostElementAppendTo.appendChild(s):e.element.nativeElement.parentNode.insertBefore(s,e.element.nativeElement.nextSibling),e.ghostElement=s,e.setElementStyles(s,{position:"fixed",top:l.top+"px",left:l.left+"px",width:l.width+"px",height:l.height+"px",cursor:e.dragCursor,margin:"0"}),e.ghostElementTemplate){var c=e.vcr.createEmbeddedView(e.ghostElementTemplate);s.innerHTML="",c.rootNodes.filter(function(e){return e instanceof Node}).forEach(function(e){s.appendChild(e)}),v.subscribe(function(){e.vcr.remove(e.vcr.indexOf(c))})}e.zone.run(function(){e.ghostElementCreated.emit({clientX:n-o,clientY:r-a,element:s})}),v.subscribe(function(){s.parentElement.removeChild(s),e.ghostElement=null,e.renderer.setStyle(e.element.nativeElement,"visibility","")})}e.draggableHelper.currentDrag.next(u)}),v.pipe(r.mergeMap(function(e){var t=p.pipe(r.count(),r.take(1),r.map(function(t){return a({},e,{dragCancelled:t>0})}));return p.complete(),t})).subscribe(function(t){var n=t.x,r=t.y,o=t.dragCancelled;e.scroller.destroy(),e.zone.run(function(){e.dragEnd.next({x:n,y:r,dragCancelled:o})}),e.renderer.removeClass(e.element.nativeElement,e.dragActiveClass),u.complete()}),t.merge(f,v).pipe(r.take(1)).subscribe(function(){e.document.head.removeChild(o)}),d}),r.share());t.merge(n.pipe(r.take(1),r.map(function(e){return[,e]})),n.pipe(r.pairwise())).pipe(r.filter(function(e){var t=l(e,2),n=t[0],r=t[1];return!n||n.x!==r.x||n.y!==r.y}),r.map(function(e){var t=l(e,2),n=(t[0],t[1]);return n})).subscribe(function(t){var n=t.x,r=t.y,o=t.currentDrag$,i=t.clientX,a=t.clientY,l=t.transformX,s=t.transformY;if(e.zone.run(function(){e.dragging.next({x:n,y:r})}),e.ghostElement){var c="translate("+l+"px, "+s+"px)";e.setElementStyles(e.ghostElement,{transform:c,"-webkit-transform":c,"-ms-transform":c,"-moz-transform":c,"-o-transform":c})}o.next({clientX:i,clientY:a,dropData:e.dropData})})},e.prototype.ngOnChanges=function(e){e.dragAxis&&this.checkEventListeners()},e.prototype.ngOnDestroy=function(){this.unsubscribeEventListeners(),this.pointerDown$.complete(),this.pointerMove$.complete(),this.pointerUp$.complete(),this.destroy$.next()},e.prototype.checkEventListeners=function(){var e=this,t=this.canDrag(),n=Object.keys(this.eventListenerSubscriptions).length>0;t&&!n?this.zone.runOutsideAngular(function(){e.eventListenerSubscriptions.mousedown=e.renderer.listen(e.element.nativeElement,"mousedown",function(t){e.onMouseDown(t)}),e.eventListenerSubscriptions.mouseup=e.renderer.listen("document","mouseup",function(t){e.onMouseUp(t)}),e.eventListenerSubscriptions.touchstart=e.renderer.listen(e.element.nativeElement,"touchstart",function(t){e.onTouchStart(t)}),e.eventListenerSubscriptions.touchend=e.renderer.listen("document","touchend",function(t){e.onTouchEnd(t)}),e.eventListenerSubscriptions.touchcancel=e.renderer.listen("document","touchcancel",function(t){e.onTouchEnd(t)}),e.eventListenerSubscriptions.mouseenter=e.renderer.listen(e.element.nativeElement,"mouseenter",function(){e.onMouseEnter()}),e.eventListenerSubscriptions.mouseleave=e.renderer.listen(e.element.nativeElement,"mouseleave",function(){e.onMouseLeave()})}):!t&&n&&this.unsubscribeEventListeners()},e.prototype.onMouseDown=function(e){var t=this;this.eventListenerSubscriptions.mousemove||(this.eventListenerSubscriptions.mousemove=this.renderer.listen("document","mousemove",function(e){t.pointerMove$.next({event:e,clientX:e.clientX,clientY:e.clientY})})),this.pointerDown$.next({event:e,clientX:e.clientX,clientY:e.clientY})},e.prototype.onMouseUp=function(e){this.eventListenerSubscriptions.mousemove&&(this.eventListenerSubscriptions.mousemove(),delete this.eventListenerSubscriptions.mousemove),this.pointerUp$.next({event:e,clientX:e.clientX,clientY:e.clientY})},e.prototype.onTouchStart=function(e){var t,n,r,o=this;if(!this.scrollContainer)try{e.preventDefault()}catch(e){}this.scrollContainer&&this.scrollContainer.activeLongPressDrag&&(this.timeLongPress.timerBegin=Date.now(),r=!1,t=this.scrollContainer.hasScrollbar(),n=this.getScrollPosition()),this.eventListenerSubscriptions.touchmove||(this.eventListenerSubscriptions.touchmove=this.renderer.listen("document","touchmove",function(i){o.scrollContainer&&o.scrollContainer.activeLongPressDrag&&!r&&t&&(r=o.shouldBeginDrag(e,i,n)),o.scrollContainer&&o.scrollContainer.activeLongPressDrag&&t&&!r||o.pointerMove$.next({event:i,clientX:i.targetTouches[0].clientX,clientY:i.targetTouches[0].clientY})})),this.pointerDown$.next({event:e,clientX:e.touches[0].clientX,clientY:e.touches[0].clientY})},e.prototype.onTouchEnd=function(e){this.eventListenerSubscriptions.touchmove&&(this.eventListenerSubscriptions.touchmove(),delete this.eventListenerSubscriptions.touchmove,this.scrollContainer&&this.scrollContainer.activeLongPressDrag&&this.scrollContainer.enableScroll()),this.pointerUp$.next({event:e,clientX:e.changedTouches[0].clientX,clientY:e.changedTouches[0].clientY})},e.prototype.onMouseEnter=function(){this.setCursor(this.dragCursor)},e.prototype.onMouseLeave=function(){this.setCursor("")},e.prototype.canDrag=function(){return this.dragAxis.x||this.dragAxis.y},e.prototype.setCursor=function(e){this.renderer.setStyle(this.element.nativeElement,"cursor",e)},e.prototype.unsubscribeEventListeners=function(){var e=this;Object.keys(this.eventListenerSubscriptions).forEach(function(t){e.eventListenerSubscriptions[t](),delete e.eventListenerSubscriptions[t]})},e.prototype.setElementStyles=function(e,t){var n=this;Object.keys(t).forEach(function(r){n.renderer.setStyle(e,r,t[r])})},e.prototype.getScrollPosition=function(){return this.scrollContainer?{top:this.scrollContainer.elementRef.nativeElement.scrollTop,left:this.scrollContainer.elementRef.nativeElement.scrollLeft}:{top:window.pageYOffset||document.documentElement.scrollTop,left:window.pageXOffset||document.documentElement.scrollLeft}},e.prototype.shouldBeginDrag=function(e,t,n){var r=this.getScrollPosition(),o={top:Math.abs(r.top-n.top),left:Math.abs(r.left-n.left)},i=Math.abs(t.targetTouches[0].clientX-e.touches[0].clientX)-o.left,a=Math.abs(t.targetTouches[0].clientY-e.touches[0].clientY)-o.top,l=i+a;(l>this.scrollContainer.longPressConfig.delta||o.top>0||o.left>0)&&(this.timeLongPress.timerBegin=Date.now()),this.timeLongPress.timerEnd=Date.now();var s=this.timeLongPress.timerEnd-this.timeLongPress.timerBegin;return s>=this.scrollContainer.longPressConfig.duration&&(this.scrollContainer.disableScroll(),!0)},e.decorators=[{type:n.Directive,args:[{selector:"[mwlDraggable]"}]}],e.ctorParameters=function(){return[{type:n.ElementRef},{type:n.Renderer2},{type:s},{type:n.NgZone},{type:n.ViewContainerRef},{type:c,decorators:[{type:n.Optional}]},{type:void 0,decorators:[{type:n.Inject,args:[o.DOCUMENT]}]}]},e.propDecorators={dropData:[{type:n.Input}],dragAxis:[{type:n.Input}],dragSnapGrid:[{type:n.Input}],ghostDragEnabled:[{type:n.Input}],showOriginalElementWhileDragging:[{type:n.Input}],validateDrag:[{type:n.Input}],dragCursor:[{type:n.Input}],dragActiveClass:[{type:n.Input}],ghostElementAppendTo:[{type:n.Input}],ghostElementTemplate:[{type:n.Input}],dragPointerDown:[{type:n.Output}],dragStart:[{type:n.Output}],ghostElementCreated:[{type:n.Output}],dragging:[{type:n.Output}],dragEnd:[{type:n.Output}]},e}();function p(e,t,n){return e>=n.left&&e<=n.right&&t>=n.top&&t<=n.bottom}var f=function(){function e(e,t,r,o,i){this.element=e,this.draggableHelper=t,this.zone=r,this.renderer=o,this.scrollContainer=i,this.dragEnter=new n.EventEmitter,this.dragLeave=new n.EventEmitter,this.dragOver=new n.EventEmitter,this.drop=new n.EventEmitter}return e.prototype.ngOnInit=function(){var e=this;this.currentDragSubscription=this.draggableHelper.currentDrag.subscribe(function(t){e.renderer.addClass(e.element.nativeElement,e.dragActiveClass);var n,o,i={updateCache:!0},a=e.renderer.listen(e.scrollContainer?e.scrollContainer.elementRef.nativeElement:"window","scroll",function(){i.updateCache=!0}),s=t.pipe(r.map(function(t){var r=t.clientX,o=t.clientY,a=t.dropData;n=a,i.updateCache&&(i.rect=e.element.nativeElement.getBoundingClientRect(),e.scrollContainer&&(i.scrollContainerRect=e.scrollContainer.elementRef.nativeElement.getBoundingClientRect()),i.updateCache=!1);var l=p(r,o,i.rect);return i.scrollContainerRect?l&&p(r,o,i.scrollContainerRect):l})),c=s.pipe(r.distinctUntilChanged());c.pipe(r.filter(function(e){return e})).subscribe(function(){o=!0,e.renderer.addClass(e.element.nativeElement,e.dragOverClass),e.zone.run(function(){e.dragEnter.next({dropData:n})})}),s.pipe(r.filter(function(e){return e})).subscribe(function(){e.zone.run(function(){e.dragOver.next({dropData:n})})}),c.pipe(r.pairwise(),r.filter(function(e){var t=l(e,2),n=t[0],r=t[1];return n&&!r})).subscribe(function(){o=!1,e.renderer.removeClass(e.element.nativeElement,e.dragOverClass),e.zone.run(function(){e.dragLeave.next({dropData:n})})}),t.subscribe({complete:function(){a(),e.renderer.removeClass(e.element.nativeElement,e.dragActiveClass),o&&(e.renderer.removeClass(e.element.nativeElement,e.dragOverClass),e.zone.run(function(){e.drop.next({dropData:n})}))}})})},e.prototype.ngOnDestroy=function(){this.currentDragSubscription&&this.currentDragSubscription.unsubscribe()},e.decorators=[{type:n.Directive,args:[{selector:"[mwlDroppable]"}]}],e.ctorParameters=function(){return[{type:n.ElementRef},{type:s},{type:n.NgZone},{type:n.Renderer2},{type:c,decorators:[{type:n.Optional}]}]},e.propDecorators={dragOverClass:[{type:n.Input}],dragActiveClass:[{type:n.Input}],dragEnter:[{type:n.Output}],dragLeave:[{type:n.Output}],dragOver:[{type:n.Output}],drop:[{type:n.Output}]},e}(),d=function(){function e(){}return e.decorators=[{type:n.NgModule,args:[{declarations:[u,f,c],exports:[u,f,c]}]}],e}();e.DragAndDropModule=d,e.ɵc=s,e.ɵd=c,e.ɵb=u,e.ɵa=f,Object.defineProperty(e,"__esModule",{value:!0})}(i,e,t,n,r,M)}))}(e,t,n,r)}(i={exports:{}},i.exports),i.exports);return(a=l)&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a});
//# sourceMappingURL=angular-draggable-droppable.umd.min.js.map
