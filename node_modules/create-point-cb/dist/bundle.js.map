{"version":3,"file":null,"sources":["../src/index.js"],"sourcesContent":["import {boolean} from 'type-func';\n\nexport default function createPointCB(object, options){\n\n    // A persistent object (as opposed to returned object) is used to save memory\n    // This is good to prevent layout thrashing, or for games, and such\n\n    // NOTE\n    // This uses IE fixes which should be OK to remove some day. :)\n    // Some speed will be gained by removal of these.\n\n    // pointCB should be saved in a variable on return\n    // This allows the usage of element.removeEventListener\n\n    options = options || {};\n\n    var allowUpdate = boolean(options.allowUpdate, true);\n\n    /*if(typeof options.allowUpdate === 'function'){\n        allowUpdate = options.allowUpdate;\n    }else{\n        allowUpdate = function(){return true;};\n    }*/\n\n    return function pointCB(event){\n\n        event = event || window.event; // IE-ism\n        object.target = event.target || event.srcElement || event.originalTarget;\n        object.element = this;\n        object.type = event.type;\n\n        if(!allowUpdate(event)){\n            return;\n        }\n\n        // Support touch\n        // http://www.creativebloq.com/javascript/make-your-site-work-touch-devices-51411644\n\n        if(event.targetTouches){\n            object.x = event.targetTouches[0].clientX;\n            object.y = event.targetTouches[0].clientY;\n            object.pageX = event.targetTouches[0].pageX;\n            object.pageY = event.targetTouches[0].pageY;\n            object.screenX = event.targetTouches[0].screenX;\n            object.screenY = event.targetTouches[0].screenY;\n        }else{\n\n            // If pageX/Y aren't available and clientX/Y are,\n            // calculate pageX/Y - logic taken from jQuery.\n            // (This is to support old IE)\n            // NOTE Hopefully this can be removed soon.\n\n            if (event.pageX === null && event.clientX !== null) {\n                var eventDoc = (event.target && event.target.ownerDocument) || document;\n                var doc = eventDoc.documentElement;\n                var body = eventDoc.body;\n\n                object.pageX = event.clientX +\n                  (doc && doc.scrollLeft || body && body.scrollLeft || 0) -\n                  (doc && doc.clientLeft || body && body.clientLeft || 0);\n                object.pageY = event.clientY +\n                  (doc && doc.scrollTop  || body && body.scrollTop  || 0) -\n                  (doc && doc.clientTop  || body && body.clientTop  || 0 );\n            }else{\n                object.pageX = event.pageX;\n                object.pageY = event.pageY;\n            }\n\n            // pageX, and pageY change with page scroll\n            // so we're not going to use those for x, and y.\n            // NOTE Most browsers also alias clientX/Y with x/y\n            // so that's something to consider down the road.\n\n            object.x = event.clientX;\n            object.y = event.clientY;\n\n            object.screenX = event.screenX;\n            object.screenY = event.screenY;\n        }\n\n        object.clientX = object.x;\n        object.clientY = object.y;\n\n    };\n\n    //NOTE Remember accessibility, Aria roles, and labels.\n};\n\n/*\ngit remote add origin https://github.com/hollowdoor/create_point_cb.git\ngit push -u origin master\n*/\n"],"names":["createPointCB","object","options","allowUpdate","boolean","pointCB","event","window","target","srcElement","originalTarget","element","type","targetTouches","x","clientX","y","clientY","pageX","pageY","screenX","screenY","eventDoc","ownerDocument","document","doc","documentElement","body","scrollLeft","clientLeft","scrollTop","clientTop"],"mappings":";;;;AAEe,SAASA,aAAT,CAAuBC,MAAvB,EAA+BC,OAA/B,EAAuC;;;;;;;;;;;;cAYxCA,WAAW,EAArB;;QAEIC,cAAcC,iBAAQF,QAAQC,WAAhB,EAA6B,IAA7B,CAAlB;;;;;;;;WAQO,SAASE,OAAT,CAAiBC,KAAjB,EAAuB;;gBAElBA,SAASC,OAAOD,KAAxB,CAF0B;eAGnBE,MAAP,GAAgBF,MAAME,MAAN,IAAgBF,MAAMG,UAAtB,IAAoCH,MAAMI,cAA1D;eACOC,OAAP,GAAiB,IAAjB;eACOC,IAAP,GAAcN,MAAMM,IAApB;;YAEG,CAACT,YAAYG,KAAZ,CAAJ,EAAuB;;;;;;;YAOpBA,MAAMO,aAAT,EAAuB;mBACZC,CAAP,GAAWR,MAAMO,aAAN,CAAoB,CAApB,EAAuBE,OAAlC;mBACOC,CAAP,GAAWV,MAAMO,aAAN,CAAoB,CAApB,EAAuBI,OAAlC;mBACOC,KAAP,GAAeZ,MAAMO,aAAN,CAAoB,CAApB,EAAuBK,KAAtC;mBACOC,KAAP,GAAeb,MAAMO,aAAN,CAAoB,CAApB,EAAuBM,KAAtC;mBACOC,OAAP,GAAiBd,MAAMO,aAAN,CAAoB,CAApB,EAAuBO,OAAxC;mBACOC,OAAP,GAAiBf,MAAMO,aAAN,CAAoB,CAApB,EAAuBQ,OAAxC;SANJ,MAOK;;;;;;;gBAOGf,MAAMY,KAAN,KAAgB,IAAhB,IAAwBZ,MAAMS,OAAN,KAAkB,IAA9C,EAAoD;oBAC5CO,WAAYhB,MAAME,MAAN,IAAgBF,MAAME,MAAN,CAAae,aAA9B,IAAgDC,QAA/D;oBACIC,MAAMH,SAASI,eAAnB;oBACIC,OAAOL,SAASK,IAApB;;uBAEOT,KAAP,GAAeZ,MAAMS,OAAN,IACZU,OAAOA,IAAIG,UAAX,IAAyBD,QAAQA,KAAKC,UAAtC,IAAoD,CADxC,KAEZH,OAAOA,IAAII,UAAX,IAAyBF,QAAQA,KAAKE,UAAtC,IAAoD,CAFxC,CAAf;uBAGOV,KAAP,GAAeb,MAAMW,OAAN,IACZQ,OAAOA,IAAIK,SAAX,IAAyBH,QAAQA,KAAKG,SAAtC,IAAoD,CADxC,KAEZL,OAAOA,IAAIM,SAAX,IAAyBJ,QAAQA,KAAKI,SAAtC,IAAoD,CAFxC,CAAf;aARJ,MAWK;uBACMb,KAAP,GAAeZ,MAAMY,KAArB;uBACOC,KAAP,GAAeb,MAAMa,KAArB;;;;;;;;mBAQGL,CAAP,GAAWR,MAAMS,OAAjB;mBACOC,CAAP,GAAWV,MAAMW,OAAjB;;mBAEOG,OAAP,GAAiBd,MAAMc,OAAvB;mBACOC,OAAP,GAAiBf,MAAMe,OAAvB;;;eAGGN,OAAP,GAAiBd,OAAOa,CAAxB;eACOG,OAAP,GAAiBhB,OAAOe,CAAxB;KAzDJ;;;;;;;;;;"}