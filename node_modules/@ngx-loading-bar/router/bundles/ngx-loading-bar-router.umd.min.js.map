{"version":3,"sources":["ng://@ngx-loading-bar/router/router.module.ts"],"names":["LoadingBarRouterModule","router","loadingBar","_this","this","events","subscribe","event","state","getCurrentNavigationState","ignoreLoadingBar","NavigationStart","start","NavigationError","NavigationEnd","NavigationCancel","complete","prototype","currentNavigation","getCurrentNavigation","extras","NgModule","args","imports","RouterModule","LoadingBarModule","exports","Router","LoadingBarService"],"mappings":"0cAAA,IAAAA,EAAA,WAeE,SAAAA,EAAYC,EAAgBC,GAA5B,IAAAC,EAAAC,KACEH,EAAOI,OAAOC,UAAU,SAAAC,OAChBC,EAAQL,EAAKM,0BAA0BR,GACzCO,GAASA,EAAME,mBAIfH,aAAiBI,EAAAA,iBACnBT,EAAWU,SAGRL,aAAiBM,EAAAA,iBAAmBN,aAAiBO,EAAAA,eAAiBP,aAAiBQ,EAAAA,mBAC1Fb,EAAWc,cAcnB,OATUhB,EAAAiB,UAAAR,0BAAR,SAAkCR,OAE1BiB,EAAoBjB,EAAOkB,sBAAwBlB,EAAOkB,uBAChE,OAAID,GAAqBA,EAAkBE,OAClCF,EAAkBE,OAAOZ,MAG3B,wBAnCVa,EAAAA,SAAQC,KAAA,CAAC,CACRC,QAAS,CACPC,EAAAA,aACAC,EAAAA,kBAEFC,QAAS,CACPF,EAAAA,aACAC,EAAAA,+DAVmBE,EAAAA,cACIC,EAAAA,qBAuC3B5B,EAzCA","sourcesContent":["import { NgModule } from '@angular/core';\nimport { RouterModule, Router, NavigationStart, NavigationError, NavigationEnd, NavigationCancel } from '@angular/router';\nimport { LoadingBarModule, LoadingBarService } from '@ngx-loading-bar/core';\n\n@NgModule({\n  imports: [\n    RouterModule,\n    LoadingBarModule,\n  ],\n  exports: [\n    RouterModule,\n    LoadingBarModule,\n  ],\n})\nexport class LoadingBarRouterModule {\n  constructor(router: Router, loadingBar: LoadingBarService) {\n    router.events.subscribe(event => {\n      const state = this.getCurrentNavigationState(router);\n      if (state && state.ignoreLoadingBar) {\n        return;\n      }\n\n      if (event instanceof NavigationStart) {\n        loadingBar.start();\n      }\n\n      if ((event instanceof NavigationError || event instanceof NavigationEnd || event instanceof NavigationCancel)) {\n        loadingBar.complete();\n      }\n    });\n  }\n\n  private getCurrentNavigationState(router: any) {\n    // `getCurrentNavigation` only available in angular `7.2`\n    const currentNavigation = router.getCurrentNavigation && router.getCurrentNavigation();\n    if (currentNavigation && currentNavigation.extras) {\n      return currentNavigation.extras.state;\n    }\n\n    return {};\n  }\n}\n"]}